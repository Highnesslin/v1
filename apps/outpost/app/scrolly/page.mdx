import { Hike } from "codehike"
import { ExplainerLayout } from "./hike"
import { ChevronsDown } from "lucide-react"

<Hike as={ExplainerLayout}>

# Code Hike v1.0<span className="text-sky-200">\*</span>: new markdown API

<span className="text-sky-200 text-2xl opacity-80">

\*under development and open for feedback

</span>

## ! bottom-16 w-56 mx-auto inset-x-0 text-center

Scroll down

<ChevronsDown
  className="mx-auto -mt-4"
  size={28}
/>

```mdx
{/* !from ./snipets/00.start.mdx */}
```

```jsx
// !from ./snipets/00.start.jsx
```

## ! top-48 right-64 w-72

Code Hike v1.0 will introduce a `<Hike/>` component with **special markdown syntax** to **render complex content**.

Code Hike will process anything inside a `<Hike/>` component and pass it to a custom layout component.

```mdx
{/* !Mark(1,5:9) */}
{/* !from ./snipets/00.hike.mdx */}
```

```jsx
// !Mark(2[1])
// !from ./snipets/00.hike.jsx
```

## ! top-36 left-56 w-60

In this example, MyLayout is a custom component that will receive the content processed by Code Hike inside a `data` prop.

```mdx
{/* !Mark(2,6) */}
{/* !from ./snipets/00.layout.mdx */}
```

```jsx
// !Mark(1,7)
// !from ./snipets/00.layout.jsx
```

## ! top-72 right-24 w-60

By default, any content inside `<Hike/>` will be passed to the `children` prop.

```mdx
{/* !Mark(6:10) */}
import { Hike } from "codehike"
import { MyLayout } from "./my-layout"

# Hello world

<Hike as={MyLayout}>

zero

</Hike>
```

```jsx
// !Mark(7:11)
import { MyLayout } from "./my-layout"

function MDXContent() {
  return (
    <>
      <h1>Hello World</h1>
      <MyLayout
        data={{
          children: <p>zero</p>
        }}
      />
    </>
  )
}
```

## ! top-52 left-48 w-60

If you add a header that starts with `!`

```mdx
{/* !Mark(7:14) */}

# Hello world

<Hike as={MyLayout}>

zero

## !steps one 1

uno

## !steps two 2

dos

</Hike>
```

```jsx
// !Mark(6:15)
<>
  <h1>Hello World</h1>
  <MyLayout
    data={{
      children: <p>zero</p>,
      steps: [
        {
          query: "one 1",
          children: <p>uno</p>
        },
        {
          query: "two 2",
          children: <p>dos</p>
        }
      ]
    }}
  />
</>
```

## ! top-36 left-56 w-60

xx

```mdx
<Hike as={MyLayout}>

zero

## !steps one 1

uno

### !steps one and a half

uno y medio

## !steps two 2

dos

</Hike>
```

```jsx
<MyLayout
  data={{
    children: <p>zero</p>,
    steps: [
      {
        query: "one 1",
        children: <p>uno</p>,
        steps: [
          {
            query: "one and a half",
            children: <p>uno y medio</p>
          }
        ]
      },
      {...}
    ]
  }}
/>
```

## ! top-36 left-56 w-60

Headers can have names other than `steps`

```mdx
<Hike as={MyLayout}>

zero

## !foo lorem ipsum

bar

## !steps one 1

uno

### !steps one and a half

uno y medio

## !steps two 2

dos

</Hike>
```

```jsx
<MyLayout
  data={{
    children: <p>zero</p>,
    foo: [
      {
        query: "lorem ipsum",
        children: <p>bar</p>
      }
    ],
    steps: [
      {
        query: "one 1",
        children: <p>uno</p>,
        steps: [...]
      },
      {
        query: "two 2",
        children: <p>dos</p>
      }
    ]
  }}
/>
```

## ! top-36 left-56 w-60

`steps` is the default, so you can omit it

```mdx
<Hike as={MyLayout}>

zero

## !foo lorem ipsum

bar

## ! one 1

uno

### ! one and a half

uno y medio

## ! two 2

dos

</Hike>
```

```jsx
<MyLayout
  data={{
    children: <p>zero</p>,
    foo: [
      {
        query: "lorem ipsum",
        children: <p>bar</p>
      }
    ],
    steps: [
      {
        query: "one 1",
        children: <p>uno</p>,
        steps: [...]
      },
      {
        query: "two 2",
        children: <p>dos</p>
      }
    ]
  }}
/>
```

## ! top-36 left-56 w-60

codeblocks are also given special treatment

````mdx
<Hike as={MyLayout}>

zero

```js log 1
console.log(1)
```

```py log 2
print(2)
```

## ! one 1

uno

### ! one and a half

uno y medio

## ! two 2

dos

</Hike>
````

```jsx
<MyLayout
  data={{
    children: <p>zero</p>,
    code: [
      {
        lang: "js",
        meta: "log 1",
        value: "console.log(1)"
      },
      {
        lang: "py",
        meta: "log 2",
        value: "print(2)"
      }
    ],
    steps: [
      {
        query: "one 1",
        children: <p>uno</p>,
        steps: [...]
      },
      {
        query: "two 2",
        children: <p>dos</p>
      }
    ]
  }}
/>
```

</Hike>
